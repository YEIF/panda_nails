"use strict";(self["webpackChunkpanda_nails"]=self["webpackChunkpanda_nails"]||[]).push([[987],{908:function(t,s,e){function i(t){const s=new Date(1e3*t);return s.toLocaleDateString()}function a(t){const s=new Date(1e3*t),e=` ${s.getFullYear()}/${s.getMonth()+1}/${s.getDate()}  ${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}`;return e}function c(t){const s=t.toString().split(".");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),s.join(".")}e.d(s,{D:function(){return i},lf:function(){return a},$E:function(){return c}})},143:function(t,s,e){e.d(s,{Z:function(){return u}});var i=e(6252);const a={class:"loadingio-spinner-spin-gw0b9unmls"},c=(0,i._)("div",{class:"ldio-jjk31xq51n"},[(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")]),(0,i._)("div",null,[(0,i._)("div")])],-1),l=[c];function n(t,s,e,c,n,o){return(0,i.wg)(),(0,i.iD)("div",a,l)}var o={},r=e(3744);const d=(0,r.Z)(o,[["render",n]]);var u=d},4427:function(t,s,e){e.d(s,{Z:function(){return x}});var i=e(6252),a=e(3577);const c={class:"list d-flex justify-content-center list-unstyled"},l=(0,i._)("i",{class:"bi bi-card-checklist fs-2"},null,-1),n=(0,i._)("p",{class:"mb-0 mb-lg-3"},"Step 1 .",-1),o=(0,i._)("p",null,"填寫資訊",-1),r=[l,n,o],d=(0,i._)("i",{class:"bi bi-credit-card fs-2"},null,-1),u=(0,i._)("p",{class:"mb-0 mb-lg-3"},"Step 2 .",-1),p=(0,i._)("p",null,"確認付款",-1),_=[d,u,p],h=(0,i._)("i",{class:"bi bi-cart-check fs-2"},null,-1),m=(0,i._)("p",{class:"mb-0 mb-lg-3"},"Step 3 .",-1),b=(0,i._)("p",null,"訂單完成",-1),v=[h,m,b];function f(t,s,e,l,n,o){return(0,i.wg)(),(0,i.iD)("ul",c,[(0,i._)("li",{class:(0,a.C_)(["rounded-circle d-flex flex-column justify-content-center text-nowrap",{active:e.stepStatus.createOrder}])},r,2),(0,i._)("li",{class:(0,a.C_)(["rounded-circle d-flex flex-column justify-content-center text-nowrap",{active:e.stepStatus.payCheck}])},_,2),(0,i._)("li",{class:(0,a.C_)(["rounded-circle d-flex flex-column justify-content-center text-nowrap",{active:e.stepStatus.success}])},v,2)])}var g={props:{stepStatus:{type:Object}}},y=e(3744);const w=(0,y.Z)(g,[["render",f]]);var x=w},5987:function(t,s,e){e.r(s),e.d(s,{default:function(){return yt}});var i=e(6252),a=e(3577);const c={class:"container mt-5"},l={key:0,class:"row mt-5"},n={class:"col-lg-4"},o={class:"list-unstyled"},r=(0,i._)("li",{class:"border-bottom h4 text-start"},[(0,i._)("div",null,"確認訂單明細")],-1),d={style:{"max-height":"350px","overflow-y":"auto"}},u={class:"row g-0"},p={class:"col-4 col-md-3 col-lg-4"},_=["src"],h={class:"col-8 col-md-9 col-lg-8 g-3 d-flex flex-column g-3 justify-content-between"},m={class:"card-body d-flex flex-column justify-content-between p-1"},b={class:"card-title fs-5 text-start"},v={class:"text-start mb-0"},f={class:"text-muted"},g={class:"mb-0 text-end fs-4"},y={class:"list-unstyled"},w={class:"input-group mb-3 pt-3 border-top"},x={key:0,type:"text",class:"form-control p-2",placeholder:"已套用優惠券",disabled:""},k=["disabled"],C=(0,i.Uk)(" 套用優惠券 "),$=(0,i._)("div",{class:"loading d-none fade"},null,-1),j=[C,$],S={key:0,class:"border-0 d-flex justify-content-between fs-4"},D=(0,i._)("p",{class:"p-1"},"總計",-1),O={class:"p-1"},z={key:1,class:"border-0 fs-4"},L={class:"fs-5 d-flex justify-content-between"},T=(0,i._)("p",{class:"p-1"},"總計",-1),Z={class:"p-1"},q={class:"d-flex justify-content-between"},E=(0,i._)("p",{class:"p-1"},"折扣後金額：",-1),N={class:"fs-4"},I={class:"col-lg-8 justify-content-center text-start border"},H=(0,i._)("div",{class:"text-start h2 border-bottom-0"},"訂購人資訊",-1),M={class:"mb-3"},P=(0,i._)("div",{class:"mb-2"},"Email",-1),U={class:"h5"},W={class:"mb-3"},Y=(0,i._)("div",{class:"mb-2"},"收件人姓名",-1),F={class:"h5"},B={class:"mb-3"},G=(0,i._)("div",{class:"mb-2"},"收件人電話",-1),K={class:"h5"},V={class:"mb-3"},A=(0,i._)("div",{class:"mb-2"},"收件人地址",-1),J={class:"h5"},Q={class:"mb-3"},R=(0,i._)("div",{class:"mb-2"},"留言",-1),X={class:"h5"},tt={class:"text-center"},st={key:1,class:"row mt-5"},et={class:"col-lg-8 justify-content-center text-center border mb-5 mx-auto"},it={class:"row"},at={class:"col-md-9 col-xl-7 mx-auto"},ct={class:"card-body bg-white text-center py-6"},lt=(0,i.uE)('<i class="bi bi-check-lg fa-4x text-success"></i><h3 class="h3 mb-4">付款成功</h3><div class="h5 mb-3">感謝您的訂購～</div><div class="d-flex justify-content-center align-items-center mb-3"> 請將此圖截下私訊IG小盒子 <a href="https://www.instagram.com/panda__57.nail/" target="_blank" class="text-white mx-3"><i class="bi bi-instagram fs-3 text-black"></i></a></div><div class="mb-4">可至訂單查詢詳細資料</div>',5),nt={class:"mb-3"},ot={class:"h5"},rt=(0,i._)("i",{class:"far fa-copy"},null,-1),dt=[rt],ut=(0,i._)("a",{href:"#/OrderTracking",class:"btn btn-outline-primary"},"前往查詢",-1);function pt(t,s,e,C,$,rt){const pt=(0,i.up)("LoadingComponent"),_t=(0,i.up)("VLoading"),ht=(0,i.up)("StepStatusComponent");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(_t,{active:$.isLoading,"z-index":1060},{default:(0,i.w5)((()=>[(0,i.Wm)(pt)])),_:1},8,["active"]),(0,i._)("div",c,[(0,i.Wm)(ht,{"step-status":$.stepStatus},null,8,["step-status"]),$.stepStatus.payCheck&&Object.keys($.order).length>0?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",n,[(0,i._)("ul",o,[r,(0,i._)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)($.order.products,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"card border-0 p-3",key:t.id+"123"},[(0,i._)("div",u,[(0,i._)("div",p,[(0,i._)("img",{src:t.product.imageUrl,class:"img-fluid",style:{"object-fit":"contain"},alt:"cart.product.title"},null,8,_)]),(0,i._)("div",h,[(0,i._)("div",m,[(0,i._)("p",b,(0,a.zw)(t.product.title),1),(0,i._)("p",v,[(0,i._)("small",f,"NT$"+(0,a.zw)(rt.toThousandths(t.product.price))+" / "+(0,a.zw)(t.product.unit),1)]),(0,i._)("p",g," NT$"+(0,a.zw)(rt.toThousandths(t.qty*t.product.price)),1)])])])])))),128))])]),(0,i._)("ul",y,[(0,i._)("li",w,[$.isCoupon?((0,i.wg)(),(0,i.iD)("input",x)):(0,i.kq)("",!0),$.isCoupon?((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-primary px-3",disabled:$.isCoupon},j,8,k)):(0,i.kq)("",!0)]),$.isCoupon?((0,i.wg)(),(0,i.iD)("li",z,[(0,i._)("small",L,[T,(0,i._)("del",Z,"NT$"+(0,a.zw)(rt.toThousandths($.beforeOrderPrice)),1)]),(0,i._)("div",q,[E,(0,i._)("span",N,"$ "+(0,a.zw)(rt.toThousandths(Math.round($.order.total)))+" NTD",1)])])):((0,i.wg)(),(0,i.iD)("li",S,[D,(0,i._)("p",O,"NT$"+(0,a.zw)(rt.toThousandths($.order.total)),1)]))])]),(0,i._)("div",I,[H,(0,i._)("div",M,[P,(0,i._)("p",U,(0,a.zw)($.order.user.email),1)]),(0,i._)("div",W,[Y,(0,i._)("p",F,(0,a.zw)($.order.user.name),1)]),(0,i._)("div",B,[G,(0,i._)("p",K,(0,a.zw)($.order.user.tel),1)]),(0,i._)("div",V,[A,(0,i._)("p",J,(0,a.zw)($.order.user.address),1)]),(0,i._)("div",Q,[R,(0,i._)("p",X,(0,a.zw)($.order.user.message),1)]),(0,i._)("div",tt,[(0,i._)("button",{type:"button",class:"btn btn-primary fs-1",onClick:s[0]||(s[0]=(...t)=>rt.payCheck&&rt.payCheck(...t))}," 確認付款 ")])])])):(0,i.kq)("",!0),$.stepStatus.success&&Object.keys($.order).length>0?((0,i.wg)(),(0,i.iD)("div",st,[(0,i._)("div",et,[(0,i._)("div",it,[(0,i._)("div",at,[(0,i._)("div",ct,[lt,(0,i._)("div",nt,[(0,i._)("p",ot,[(0,i.Uk)(" 訂單編號:"+(0,a.zw)($.order.id)+" ",1),(0,i._)("span",{class:"ms-3",type:"button",onClick:s[1]||(s[1]=t=>rt.copyOrderId($.order.id))},dt)])]),ut])])])])])):(0,i.kq)("",!0)])],64)}var _t=e(4902),ht=e(143),mt=e(4427),bt=e(908),vt={components:{LoadingComponent:ht.Z,StepStatusComponent:mt.Z},data(){return{carts:{},isLoadingItem:"",isLoading:!1,isCoupon:{type:!1},code:"",stepStatus:{createOrder:!1,payCheck:!0,success:!1},order:{},beforeOrderPrice:0}},methods:{DateFn:bt.D,toThousandths:bt.$E,getOrder(){const{id:t}=this.$route.params,s=`https://vue3-course-api.hexschool.io/v2/api/clothes/order/${t}`;this.isLoading=!0,this.$http.get(s).then((t=>{this.order=t.data.order;let s=0;Object.values(this.order.products).forEach((t=>{if(void 0===t.coupon)this.isCoupon=!1;else{const{coupon:e}=t;s+=t.total,this.beforeOrderPrice=s,this.isCoupon=e,this.isCoupon.type=!0}})),this.isLoading=!1})).catch((t=>{this.isLoading=!1,_t.Z.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},payCheck(){this.stepStatus.payCheck=!1,this.stepStatus.success=!0,this.payOrder()},payOrder(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/v2/api/clothes/pay/${this.order.id}`;this.$http.post(t).then((t=>{t.data.success&&(this.isLoading=!1,_t.Z.emit("push-message",{style:"success",title:`${t.data.message}`}))})).catch((t=>{this.isLoading=!1,_t.Z.emit("push-message",{style:"success",title:`${t.response.data.message}`})}))},copyOrderId(t){navigator.clipboard&&(navigator.clipboard.writeText(t),_t.Z.emit("push-message",{style:"success",title:`${t}\n已複製到剪貼簿`}))}},mounted(){this.getOrder()}},ft=e(3744);const gt=(0,ft.Z)(vt,[["render",pt]]);var yt=gt}}]);
//# sourceMappingURL=987.41eb0064.js.map