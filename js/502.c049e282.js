"use strict";(self["webpackChunkpanda_nails"]=self["webpackChunkpanda_nails"]||[]).push([[502],{9117:function(t,e,s){s.r(e),s.d(e,{default:function(){return R}});var i=s(6252),a=s(3577),o=s(9963);const r={key:0,class:"container my-5","data-aos":"fade-up","data-aos-offset":"100"},d={class:"row row-cols-1 row-cols-md-2"},c={class:"col"},n={class:"col"},l={"aria-label":"breadcrumb"},u={class:"breadcrumb mt-3"},p={class:"breadcrumb-item"},g=(0,i.Uk)("產品頁面"),h={class:"breadcrumb-item active","aria-current":"page"},m={class:"text-start fs-2 d-flex align-items-center"},b={class:"fw-bold mb-0 me-2"},f=(0,i._)("div",{class:"text-start my-2"},null,-1),v={class:"product-description text-secondary text-start fs-5 mt-3"},y={class:"product-content text-secondary text-start fs-5 mt-3"},_={class:"fw-bold text-end text-danger fs-3 mt-4"},w={class:"text-end fs-6 small text-muted d-block"},k={class:"input-group mt-4"},x={key:0},L=(0,i._)("h2",{class:"my-5","data-aos":"fade-up","data-aos-offset":"100"},"為您推薦",-1),$={class:"overflow-hidden"},C=["onClick"],z={class:"card-body text-start"},T={class:"d-flex justify-content-between align-items-center"},Z={class:"card-title fs-4 fw-bold text-nowrap my-1"},q={class:"badge rounded-pill bg-success fs-7"},S={class:"card-text d-flex justify-content-between align-items-center"},P={class:"fw-bold card-text text-danger fs-5 my-1"},j={class:"m-start fs-6 small text-muted"},F=["onClick"],I=(0,i._)("i",{class:"bi bi-cart-plus fs-3"},null,-1),O=[I];function W(t,e,s,I,W,B){const N=(0,i.up)("LoadingComponent"),U=(0,i.up)("VLoading"),V=(0,i.up)("HeaderBanner"),D=(0,i.up)("RouterLink"),H=(0,i.up)("SwiperSlide"),E=(0,i.up)("Swiper");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(U,{active:W.isLoading,"z-index":1060},{default:(0,i.w5)((()=>[(0,i.Wm)(N)])),_:1},8,["active"]),(0,i.Wm)(V,{msg:W.product.title},null,8,["msg"]),Object.keys(W.product).length>0?((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",d,[(0,i._)("div",c,[(0,i._)("div",{class:"h-100 product-img",style:(0,a.j5)([{backgroundImage:`url(${W.product.imagesUrl})`},{"background-size":"cover",position:"relative","background-repeat":"no-repeat","background-position":"center 50%"}])},null,4)]),(0,i._)("div",n,[(0,i._)("nav",l,[(0,i._)("ol",u,[(0,i._)("li",p,[(0,i.Wm)(D,{to:"/products",class:"text-decoration-none"},{default:(0,i.w5)((()=>[g])),_:1})]),(0,i._)("li",h,(0,a.zw)(W.product.title),1)])]),(0,i._)("div",null,[(0,i._)("div",m,[(0,i._)("h3",b,(0,a.zw)(W.product.title),1),(0,i._)("small",{type:"button",class:"badge rounded-pill bg-success fs-7",onClick:e[0]||(e[0]=t=>B.goToCategory(W.product.category))},(0,a.zw)(W.product.category),1)]),f,(0,i._)("div",v,(0,a.zw)(W.product.description),1),(0,i._)("div",y,(0,a.zw)(W.product.content),1),(0,i._)("div",_,[(0,i._)("del",w," 原價 : "+(0,a.zw)(B.toThousandths(W.product.origin_price))+" 元",1),(0,i.Uk)(" NT $"+(0,a.zw)(B.toThousandths(W.product.price))+" 元 ",1)]),(0,i._)("div",k,[(0,i._)("button",{type:"button",class:"btn btn-primary fs-4 p-1 me-2",style:{},onClick:e[1]||(e[1]=t=>B.toggleFavorite(W.product.id,W.product.title))},[(0,i._)("i",{class:(0,a.C_)(W.favoriteList.includes(W.product.id)?"bi-heart-fill":"bi-heart")},null,2)]),(0,i.wy)((0,i._)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>W.qty=t),min:"1"},null,512),[[o.nr,W.qty,void 0,{number:!0}]]),(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:e[3]||(e[3]=t=>B.addToCart(W.product.id,W.product.title,W.qty))}," 加入購物車 ")])])])]),W.products.length>0?((0,i.wg)(),(0,i.iD)("div",x,[L,(0,i.Wm)(E,{modules:W.modules,Navigation:"",pagination:{clickable:!1},loop:!1,breakpoints:{640:{slidesPerView:1,spaceBetween:0},768:{slidesPerView:2,spaceBetween:30},1024:{slidesPerView:3,spaceBetween:30}},autoplay:{delay:1500,disableOnInteraction:!1,pauseOnMouseEnter:!0}},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(W.products,(t=>((0,i.wg)(),(0,i.j4)(H,{key:t.id},{default:(0,i.w5)((()=>[(0,i._)("div",$,[(0,i._)("button",{type:"button",class:"btn btn-primary position-absolute fs-4 p-1",style:{left:"20px","z-index":"1"},onClick:e=>B.toggleFavorite(t.id,t.title)},[(0,i._)("i",{class:(0,a.C_)(W.favoriteList.includes(t.id)?"bi-heart-fill":"bi-heart")},null,2)],8,C),(0,i.Wm)(D,{to:`/product/${t.id}`,class:""},{default:(0,i.w5)((()=>[(0,i._)("div",{class:"card-img-top card-img-scale",style:(0,a.j5)([{height:"300px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)])),_:2},1032,["to"])]),(0,i._)("div",z,[(0,i._)("div",T,[(0,i._)("h3",Z,(0,a.zw)(t.title),1),(0,i._)("span",q,(0,a.zw)(t.category),1)]),(0,i._)("div",S,[(0,i._)("p",P,[(0,i.Uk)(" NT $"+(0,a.zw)(B.toThousandths(t.price))+" 元 ",1),(0,i._)("del",j,(0,a.zw)(B.toThousandths(t.origin_price))+" 元",1)]),(0,i._)("button",{type:"button",onClick:(0,o.iM)((e=>B.addToCart(t.id,t.title)),["prevent"]),class:"card-link text-decoration-none btn btn-outline-primary"},O,8,F)])])])),_:2},1024)))),128))])),_:1},8,["modules"])])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],64)}var B=s(143),N=s(524),U=s(4902),V=s(8722),D=s(3181),H=s(1911),E=s(908),J=s(94),M={mixins:[J.Z],components:{LoadingComponent:B.Z,Swiper:D.tq,SwiperSlide:D.o5,HeaderBanner:N.Z},data(){return{product:{},products:{},qty:1,isLoading:!1,BannerImage:V,modules:[H.W_,H.tl,H.pt],favoriteList:[]}},watch:{qty(t,e){(t<=0||-1!==String(t).indexOf("."))&&(this.qty=e)},$route(t){t.path.includes("/product/")&&this.getProduct()},favoriteList:{handler(){localStorage.setItem("Favorite",JSON.stringify(this.favoriteList)),U.Z.emit("get-favorite-num")},deep:!0}},methods:{toThousandths:E.$E,getProducts(t=1){this.isLoading=!0;const e=this.product.category;this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/clothes/products/?page=${t}&category=${e}`).then((t=>{this.products=t.data.products;const{id:e}=this.product;this.products=Object.values(this.products).filter((t=>t.id!==e)),this.isLoading=!1})).catch((t=>{this.isLoading=!1,U.Z.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},getProduct(){const{id:t}=this.$route.params;this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/v2/api/clothes/product/${t}`;this.$http.get(e).then((t=>{this.product=t.data.product,document.title=`${this.product.title} | Panda_Nails`,this.getProducts(),this.isLoading=!1})).catch((t=>{this.isLoading=!1,U.Z.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},addToCart(t,e,s=1){const i={product_id:t,qty:s};this.isLoading=!0;const a="https://vue3-course-api.hexschool.io/v2/api/clothes/cart/";this.$http.post(a,{data:i}).then((t=>{this.qty=1,U.Z.emit("get-cart-num"),U.Z.emit("push-message",{style:"success",title:`${e}${t.data.message}`}),this.isLoading=!1})).catch((t=>{this.isLoading=!1,U.Z.emit("push-message",{style:"danger",title:`${t.response.data.message}`})}))},toggleFavorite(t,e){const s=this.favoriteList.findIndex((e=>e===t));-1===s?(this.favoriteList.push(t),U.Z.emit("push-message",{style:"success",title:`${e}已 加入我的最愛`})):(this.favoriteList.splice(s,1),U.Z.emit("push-message",{style:"danger",title:`${e}已 取消我的最愛`}))},getFavorite(){const t=localStorage.getItem("Favorite")||"[]";this.favoriteList=JSON.parse(t)},goToCategory(t){this.$router.push({name:"產品頁面",params:{category:t}})}},mounted(){this.getProduct(),this.getFavorite()}},Y=s(3744);const K=(0,Y.Z)(M,[["render",W]]);var R=K}}]);
//# sourceMappingURL=502.c049e282.js.map